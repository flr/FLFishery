---
title:  "The FLFishery package for modelling fishing fleets"
author: Iago Mosqueira, Finlay Scott - European Commission Joint Research Center
date: "`r format(Sys.time(), '%B, %Y')`"
tags: [FLR, fishery]
output: rmarkdown::html_vignette
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{FLFishery}
  \usepackage[utf8]{inputenc}
---

```{r, setup, echo=FALSE, results='hide', message=FALSE}
library(knitr)
opts_chunk$set(dev='png', cache=TRUE, fig.width=4.5, fig.height=4.5, tidy=TRUE)
options(width=50)
```

```{r, load, echo=FALSE, results='hide', message=FALSE, warnings=FALSE}
library(FLFishery)
```

# Introduction

The __FLFishery__ package contains classes for modelling fishing activity.
At the moment, it is mainly used by the __FLasher__ package for performing projections.
Other than the classes, the package currently has limited functionality.

# Design

# Classes

A number of S4 classes are defined in the `FLFishery` package, built around other classes in the FLR system. They represent different parts of the fishery system, all related to the activities of the fishing fleets we are modelling.

## FLCatch

The `FLCatch` class contains information on the removals from a single population a fleet is responsible for. Those catches are considered here to be a combination of landings and discards.

### Slots

- `landings.n` Landings at age in numbers (`1`)
- `landings.wt` Mean weight at age in the landings (`kg`)
- `discards.n` Discards at age in numbers (`1`)
- `discards.wt` Mean weight at age in the discards (`kg`)
- `catch.sel` Combined total selectivity of the gear or gears used by this fleet (`NA`)
- `price` Price of landings by unit of weight (`eur/kg`)

## FLCatches

The `FLCatches` class is a list of named `FLCatch` objects.
Each `FLCatch` in the list may catch from a different stock and have a different selectivity pattern etc.

## FLFishery

A `FLFishery` is made up of an `FLCatches` slot to represent the catches of that fishery.
The `FLFishery` also has an *effort* slot to store fishing effort. The same fishing effort is applied to all `FLCatch` objects in the `FLCatches` list.

## FLFisheries

A list of `FLFishery` objects. Essentially, it is a container class.

# Coercion

It is possible to make `FLCatch` and `FLFishery` objects from an `FLStock`.
This can be useful if you are making these objects from the results of a stock assessment.

For example, to make an `FLCatch` from an `FLStock`:

```{r, coerceFLStoFLC}
# Load an FLStock
data(ple4)
# Make an FLCatch
flc <- as(ple4, "FLCatch")
summary(flc)
```

The *catch.sel* slot takes the selectivity pattern from the *harvest* slot of the `FLStock`.

A similar method can be used to make an `FLFishery` from an `FLStock`.

```{r, coerceFLStoFLF}
# Load an FLStock
data(ple4)
# Make an FLFishery
flf <- as(ple4, "FLFishery")
```

The `FLCatches` slot of the `FLFishery` can be accessed using the [[ ]] accessor:

```{r}
summary(flf[[1]])
```

# Economics

The `FLCatch` and `FLFishery` classes both contain slots for storing basic economic information.

# More information

* You can submit bug reports, questions or suggestions on `FLFishery` at the `FLFishery` issue page ^[<https://github.com/iagomosqueira/FLFishery/issues>], or on the *FLR* mailing list.
* Or send a pull request to <https://github.com/iagomosqueira/FLFishery/>
* For more information on the FLR Project for Quantitative Fisheries Science in R, visit the FLR webpage ^[<http://flr-project.org>].
* The latest version of `FLFishery` can always be installed using the `devtools` package, by calling
```{r, devtools, echo=TRUE, eval=FALSE}
	library(devtools)
	install_github('iagomosqueira/FLFishery')
```

## Software Versions

* `r version$version.string`
* FLFishery: `r packageVersion('FLFishery')`
* FLCore: `r packageVersion('FLCore')`
* ggplotFL: `r packageVersion('ggplotFL')`
* **Compiled**: `r date()`
* **Git Hash**: `r system("git log --pretty=format:'%h' -n 1", intern=TRUE)`

## `knitr` options

```{r setupf, ref.label='setup', echo=2, eval=FALSE}
```
